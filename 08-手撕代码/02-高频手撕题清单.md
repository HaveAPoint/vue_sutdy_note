# 高频手撕题（速记与示例）

## 1. 实现 Promise.all

```javascript
function myPromiseAll(iterable) {
  return new Promise((resolve, reject) => {
    const results = []
    let finished = 0
    const total = iterable.length
    if (total === 0) return resolve([])

    iterable.forEach((item, index) => {
      Promise.resolve(item).then(value => {
        results[index] = value
        if (++finished === total) resolve(results)
      }, reject)
    })
  })
}
```

## 2. 发布订阅（EventEmitter）

```javascript
class EventEmitter {
  constructor() { this.events = new Map() }
  on(type, handler) {
    const list = this.events.get(type) || []
    list.push(handler)
    this.events.set(type, list)
  }
  off(type, handler) {
    this.events.set(type, (this.events.get(type) || []).filter(fn => fn !== handler))
  }
  emit(type, ...args) {
    (this.events.get(type) || []).forEach(fn => fn(...args))
  }
  once(type, handler) {
    const wrapper = (...args) => { handler(...args); this.off(type, wrapper) }
    this.on(type, wrapper)
  }
}
```

## 3. 函数柯里化

```javascript
function curry(fn, ...preset) {
  return function curried(...args) {
    const allArgs = [...preset, ...args]
    return allArgs.length >= fn.length
      ? fn.apply(this, allArgs)
      : curry(fn, ...allArgs)
  }
}
```

## 4. 防抖/节流（回顾）

- 防抖：高频触发只执行最后一次。核心：清理旧定时器再设新定时器。
- 节流：固定时间窗口内最多执行一次。核心：记录上次执行时间或用定时器占位。
- 详解实现见 `01-JavaScript基础/05-防抖节流.md`。
